掘金小册(微信登陆): https://juejin.im/book/6844733722936377351/section/6844733722919452686

# protobuf
传输使用一系列的键值对，如果连续的键重复了，那说明传输的值是一个列表.

## key=tag||type
tag和type都用整数来标识, 因此可以使用varint编码
    
## value

### 整数
若是负数, 先用 zigzag 编码, 再用varint, 否则直接varint(存疑)

### 浮点数
使用标准的浮点数标识法
float: 4个字节
double: 6个字节

### 字符串
前缀编码, 第一个字节是字符串长度, 若很长就多个字节, 使用varint编码, 后面是字符串的内容.

### 嵌套
长度前缀+整个嵌套对象的内容, 内容会递归得用Protobuf编码和解码

### optional
v2版本有, 数据流里面没有专门的标志说明字段是可选的, 但在运行时会检查
v3版本已经消失, 都是可选类型了

## 消息类型
长度前缀+消息类型, 应用根据消息类型选择对应的解码器来读取消息









